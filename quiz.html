<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz BvA</title>
  <link rel="stylesheet" href="static/quiz.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
          href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap"
          rel="stylesheet">
</head>
<script src="script.js"></script>
<body>

  <button onclick="QuizTest()">Quiz Test</button>

<!-- Startscreen -->
<div class="start" id="start">
  <header>
    <h1>Quiz</h1>
  </header>
  <button class="startbutton" onclick="hideStart()">Start</button>
  <footer>
    About Us
  </footer>
</div>

<!-- Modus-Auswahl -->
<div class="modis" id="modis" style="display: none;">
  <header>
    <h1>Wähle einen Modus</h1>
  </header>
  <ul data-orientation="vertical" data-position="top">
    <div class="modus">
      <h2>Logos</h2>
      <br>
      <button class="modus-button" onclick="startModi1()">Starte Quiz</button>
    </div>
    <div class="modus">
      <h2>Allgemein Wissen</h2>
      <br>
      <button class="modus-button" onclick="startModi2()">Starte Quiz</button>
    </div>
    <div class="modus">
      <h2>Wissen der IT</h2>
      <br>
      <button class="modus-button" onclick="startModi3()">Starte Quiz</button>
    </div>
  </ul>
</div>

<!-- Fragebildschirm -->
<div class="question-screen" id="question-screen" style="display: none;">
  <h2 id="question-text">Frage hier anzeigen</h2>
  <div class="answers-container" id="answers-container">
    <!-- Dynamische Antworten -->
  </div>
  <div class="next-button-container">
    <button id="next-button" style="display: none;" class="next-button">Nächste Frage</button>
  </div>
</div>

<!-- Ergebnisscreen -->
<div id="result-screen" class="result-screen" style="display: none;">
  <div class="result-screen-content">
    <h2>Ergebnis</h2>
    <p id="score-text"></p>
    <button id="restart-button" class="restart-button" onclick="restartQuiz()">Zurück zur Modus Auswahl</button>
  </div>
</div>

<!-- Highscore-Bereich -->
<div id="highscore-screen" class="highscore-screen">
  <h1>Willkommen, <span id="username-display">Benutzername</span>!</h1>
  <br>
  <p>Logos</p>
  <span id="logos-score">Highscore</span>
  <br><br>
  <p>Allgemein Wissen</p>
  <span id="general-score">Highscore</span>
  <br><br>
  <p>Informatik</p>
  <span id="it-score">Highscore</span>
</div>

<!-- JavaScript -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    fetch('/user-data')
            .then(response => {
              if (!response.ok) {
                throw new Error('Not logged in');
              }
              return response.json();
            })
            .then(data => {
              // Setze den Benutzernamen und die Highscores
              document.getElementById('username-display').textContent = data.username;
              document.getElementById('logos-score').textContent = data.highscores.quiz_1 || 0;
              document.getElementById('general-score').textContent = data.highscores.quiz_2 || 0;
              document.getElementById('it-score').textContent = data.highscores.quiz_3 || 0;
            })
            .catch(error => {
              console.error('Error:', error);
              alert('Bitte loggen Sie sich ein, um das Quiz zu starten.');
              window.location.href = '/'; // Zurück zur Login-Seite
            });
  });
  // Fragen-Sets
  const questions = [
    {
      question: 'Was ist die Hauptstadt von Deutschland?',
      answers: ["Berlin", "München", "Hamburg", "Köln"],
      correct: 0
    },
    {
      question: "Wie viele Kontinente gibt es?",
      answers: ["5", "6", "7", "8"],
      correct: 2
    },
    {
      question: "Welche Automarke hat ein Pferd als Logo?",
      answers: ["Ferrari", "Ford", "Volkswagen", "Nissan"],
      correct: 0
    },
    {
      question: "Wie viele Bundesländer hat Deutschland?",
      answers: ["4", "19", "20", "16"],
      correct: 3
    },
  ];

  const questions2 = [
    {
      question: 'Was ist die Hauptstadt von Deutschland?',
      answers: ["Berlin", "München", "Hamburg", "Köln"],
      correct: 0
    },
    {
      question: "Wie viele Kontinente gibt es?",
      answers: ["5", "6", "7", "8"],
      correct: 2
    },
    {
      question: "Welche Automarke hat ein Pferd als Logo?",
      answers: ["Ferrari", "Ford", "Volkswagen", "Nissan"],
      correct: 0
    },
    {
      question: "Wie viele Bundesländer hat Deutschland?",
      answers: ["4", "19", "20", "16"],
      correct: 3
    },
    {
      question: "Wie viele Knochen hat ein Mensch?",
      answers: ["207", "206", "311", "261"],
      correct: 1
    },
    {
      question: "Was heißt IT?",
      answers: ["Informatik Technologie", "Informations Technologie", "Info Text"],
      correct: 1
    },
  ];

  const questions3 = [
    {
      question: "Was ist die Dateiendung für C++?",
      answers: ["c", "c++", "cpp", "cpps"],
      correct: 2
    },
    {
      question: "Was davon ist keine Programmiersprache?",
      answers: ["Java", "Python", "HTML", "C#"],
      correct: 2
    },
    {
      question: "Welcher HTML Tag ist für eine große Überschrift?",
      answers: ["<p>", "<h1>", "<ul>", "<input>"],
      correct: 1
    },
    {
      question: "Was davon ist JavaScript?",
      answers: ["print()", "console.log()"],
      correct: 1
    },
    {
      question: "Was davon ist ein Frontend Framework?",
      answers: ["Angular", "node.js", "Webstorm", "mysql"],
      correct: 0,
    },
    {
      question: "Bedeutet VPN Virtual Private Network?",
      answers: ["Ja", "Nein"],
      correct: 0,
    },
    {
      question: "Was ist die Entwicklungsumgebung für IOS Apps?",
      answers: ["Visual Studio", "XCode", "IntelliJ", "PyCharm"],
      correct: 1,
    },
    {
      question: "Für was ist CSS?",
      answers: ["Für Website Logik", "Für Backend", "Zum Designen einer Website", "Zum Designen einer IOS App"],
      correct: 2
    },
    {
      question: "Auf welchem Betriebssystem laufen die meisten Server?",
      answers: ["Windows", "macOS", "Linux"],
      correct: 2,
    },
    {
      question: "Wie werden Passwörter in einer Datenbank gespeichert?",
      answers: ["Ganz normal wie sie sind", "als Hash"],
      correct: 1,
    },
    {
      question: "Welche Entwicklungsumgebung ist für Java?",
      answers: ["IntelliJ", "PyCharm", "Webstorm", "XCode"],
      correct: 0,
    },
  ];

  // Globale Variablen
  let currentQuestions = []; // Enthält das aktuell ausgewählte Fragen-Set
  let currentQuestionIndex = 0;
  let score = 0;

  // Referenzen auf DOM-Elemente
  const questionScreen = document.getElementById("question-screen");
  const resultScreen = document.getElementById("result-screen");
  const questionText = document.getElementById("question-text");
  const answersContainer = document.getElementById("answers-container");
  const nextButton = document.getElementById("next-button");
  const scoreText = document.getElementById("score-text");

  // Modi auswählen
  function hideStart() {
    document.getElementById('start').style.display = 'none';
    document.getElementById('modis').style.display = 'block';
    document.getElementById('highscore-screen').style.display = 'block';
    //document.getElementById('password').style.display = 'block';
  }

  function startModi1() {
    document.getElementById('modis').style.display = 'none';
    currentQuestions = questions; // Setze das Fragen-Set für Modi 1
    startQuiz();
  }

  function startModi2() {
    document.getElementById('modis').style.display = 'none';
    currentQuestions = questions2; // Setze das Fragen-Set für Modi 2
    startQuiz();
  }

  function startModi3() {
    document.getElementById('modis').style.display = 'none';
    currentQuestions = questions3; // Setze das Fragen-Set für Modi 3
    startQuiz();
  }

  // Quiz starten
  function startQuiz() {
    questionScreen.style.display = 'block';
    resultScreen.style.display = 'none';
    currentQuestionIndex = 0;
    score = 0;
    loadQuestion();
  }

  function loadQuestion() {
    const currentQuestion = currentQuestions[currentQuestionIndex];
    questionText.textContent = currentQuestion.question;

    // Styling des Containers für Zentrierung
    const answersContainer = document.getElementById("answers-container");
    answersContainer.style.display = "flex";
    answersContainer.style.flexDirection = "column";
    answersContainer.style.alignItems = "center";
    answersContainer.style.justifyContent = "center";
    answersContainer.style.height = "80%"; // Höhe des Containers setzen

    answersContainer.innerHTML = ""; // Vorherige Inhalte löschen

    currentQuestion.answers.forEach((answer, index) => {
      const button = document.createElement("button");
      button.textContent = answer;
      button.classList.add("answer-button");

      // Styling für die Buttons
      button.style.display = "block";
      button.style.width = "50%"; // Breite der Buttons
      button.style.margin = "10px 0"; // Abstand zwischen Buttons
      button.style.padding = "10px"; // Größere Klickflächen

      button.addEventListener("click", () => selectAnswer(index));
      answersContainer.appendChild(button);
    });

    nextButton.style.display = 'none';
  }



  // Antwort prüfen
  function selectAnswer(selectedIndex) {
    const currentQuestion = currentQuestions[currentQuestionIndex];
    if (selectedIndex === currentQuestion.correct) {
      score++;
    }
    //nextButton.style.display = 'block';
    nextQuestion();
  }

  function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < currentQuestions.length) {
      loadQuestion();
    } else {
      showResults();
    }
  }


  nextButton.addEventListener("click", () => {
    currentQuestionIndex++;
    if (currentQuestionIndex < currentQuestions.length) {
      loadQuestion();
    } else {
      showResults();
    }
  });

  // Ergebnisse anzeigen
  function showResults() {
    questionScreen.style.display = 'none';
    resultScreen.style.display = 'block';
    scoreText.textContent = `Du hast ${score} von ${currentQuestions.length} Fragen richtig beantwortet.`;
  }

  // Quiz neu starten
  document.getElementById("restart-button").addEventListener("click", () => {
    questionScreen.style.display = 'none';
    resultScreen.style.display = 'none';
    document.getElementById('modis').style.display = 'block';
  });

  function QuizTest() {
    document.getElementById('start').style.display = 'none';
    document.getElementById('modis').style.display = 'block';
  }
</script>
</body>

</html>
